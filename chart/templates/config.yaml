apiVersion: v1
kind: ConfigMap
metadata:
  name: order-config
data:
  BASE_APP_URL: {{ .Values.appBasePath }}
  DATABASE_URL: {{ printf "jdbc:postgresql://%s:%s/%s" (include "postgresql.fullname" .) .Values.postgresql.service.port .Values.postgresql.postgresqlDatabase  | quote }}
  MQ_URL: {{ .Values.mq.url }}
  MQ_PORT: {{ .Values.mq.port | quote }}
  MQ_USER: {{ .Values.mq.user }}
  CART_URL: {{ .Values.cartUrl }}
---
apiVersion: v1
kind: Secret
metadata:
  name: order-secret
type: Opaque
data:
  DATABASE_USER: {{ printf "%s" .Values.postgresql.postgresqlUsername  | b64enc | quote }}
  DATABASE_PSW: {{ printf "%s" .Values.postgresql.postgresqlPassword  | b64enc | quote }}
  MQ_PSW: {{ printf "%s" .Values.mq.password  | b64enc | quote }}
